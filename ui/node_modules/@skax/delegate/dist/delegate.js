/*
* delegate.js v4.0.2
* Copyright (c) 2025-12-16
* Released under the MIT License.
*/
(function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :
    typeof define === 'function' && define.amd ? define(factory) :
    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.delegate = factory());
})(this, (function () { 'use strict';

    var DOCUMENT_NODE_TYPE = 9;
    /**
     * A polyfill for Element.matches()
     */ if (typeof Element !== "undefined" && !Element.prototype.matches) {
        var proto = Element.prototype;
        proto.matches = (proto == null ? void 0 : proto.matchesSelector) || (proto == null ? void 0 : proto.mozMatchesSelector) || (proto == null ? void 0 : proto.msMatchesSelector) || (proto == null ? void 0 : proto.oMatchesSelector) || (proto == null ? void 0 : proto.webkitMatchesSelector);
    }
    /**
     * Finds the closest parent that matches a selector.
     *
     * @param {Element} element
     * @param {string} selector
     * @return {Element}
     */ function closest(element, selector) {
        while(element && element.nodeType !== DOCUMENT_NODE_TYPE){
            if (typeof element.matches === "function" && element.matches(selector)) {
                return element;
            }
            element = element.parentNode;
        }
        return null;
    }
    /**
     * Finds the closest parent that matches a selector.
     *
     * @param {Element} element
     * @param {string} selector
     * @return {Element}
     */ function closestNative(element, selector) {
        return element && element.closest(selector);
    }
    var closest$1 = typeof Element.prototype.closest === "function" ? closestNative : closest;

    /**
     * Delegates event to a selector.
     *
     * @param {Element} element
     * @param {string} selector
     * @param {string} type
     * @param {Function} callback
     * @param {boolean} useCapture
     * @return {Object}
     */ // prettier-ignore
    function _delegate(element, selector, type, callback, useCapture) {
        // prettier-ignore
        var listenerFn = listener.apply(this, arguments);
        element.addEventListener(type, listenerFn, useCapture);
        return {
            destroy: function destroy() {
                element.removeEventListener(type, listenerFn, useCapture);
            }
        };
    }
    /**
     * Delegates event to a selector.
     *
     * @param {Element|string|Array} [elements]
     * @param {string | Element} selector
     * @param {string} type
     * @param {Function} callback
     * @param {boolean} useCapture
     * @return {Object}
     * @example
     * ```ts
     * const delegation = delegate(document.body, 'a', 'click', function (e) {})
     * // destroy (removeEventListener)
     * delegation.destroy();
     *
     * const delegation1 = delegate(".btn", "click", function (e) { console.log(e.delegateTarget)},false);
     * // destroy (removeEventListener)
     * delegation1.destroy();
     * ```
     */ // prettier-ignore
    function delegate(elements, selector, type, callback, useCapture) {
        // Handle the regular Element usage
        if (typeof elements.addEventListener === "function") {
            return _delegate.apply(null, arguments);
        }
        // Handle Element-less usage, it defaults to global delegation
        if (typeof type === "function") {
            // Use `document` as the first parameter, then apply arguments
            // This is a short way to .unshift `arguments` without running into deoptimizations
            return _delegate.bind(null, document).apply(null, arguments);
        }
        // Handle Selector-based usage
        if (typeof elements === "string") {
            elements = document.querySelectorAll(elements);
        }
        // Handle Array-like based usage
        return Array.prototype.map.call(elements, function(element) {
            return _delegate(element, selector, type, callback, useCapture);
        });
    }
    /**
     * Finds closest match and invokes callback.
     *
     * @param {Element} element
     * @param {string} selector
     * @param {string} type
     * @param {Function} callback
     * @return {Function}
     */ // prettier-ignore
    function listener(element, selector, type, callback) {
        return function(e) {
            e.delegateTarget = closest$1(e.target, selector);
            if (e.delegateTarget) {
                callback.call(element, e);
            }
        };
    }

    return delegate;

}));
